<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª - Mauri Services</title>
    
    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-firestore-compat.js"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: #f8f9fa;
            color: #333;
        }
        
        .admin-header {
            background: white;
            padding: 1rem 2rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .admin-nav {
            background: #2c5aa0;
            color: white;
            padding: 1rem 2rem;
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }
        
        .admin-nav a {
            color: white;
            text-decoration: none;
            padding: 0.5rem 1rem;
            border-radius: 5px;
            transition: background 0.3s;
        }
        
        .admin-nav a:hover, .admin-nav a.active {
            background: rgba(255,255,255,0.2);
        }
        
        .content {
            padding: 2rem;
        }
        
        .section {
            background: white;
            padding: 1.5rem;
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            margin-bottom: 2rem;
        }
        
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid #f0f0f0;
        }
        
        .form-group {
            margin-bottom: 1.5rem;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: #2c5aa0;
        }
        
        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 0.8rem;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s;
        }
        
        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            border-color: #2c5aa0;
            outline: none;
        }
        
        .btn {
            padding: 0.8rem 1.5rem;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1rem;
            margin: 0.25rem;
            transition: all 0.3s ease;
        }
        
        .btn-primary {
            background: #2c5aa0;
            color: white;
        }
        
        .btn-success {
            background: #28a745;
            color: white;
        }
        
        .btn-danger {
            background: #dc3545;
            color: white;
        }
        
        .btn-warning {
            background: #ffc107;
            color: #212529;
        }
        
        .btn-info {
            background: #17a2b8;
            color: white;
        }
        
        .btn-sm {
            padding: 0.4rem 0.8rem;
            font-size: 0.9rem;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 3px 10px rgba(0,0,0,0.2);
        }
        
        .logout-btn {
            background: #dc3545;
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 5px;
            cursor: pointer;
        }
        
        .settings-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
        }
        
        .setting-card {
            background: #f8f9fa;
            padding: 1.5rem;
            border-radius: 10px;
            border-left: 4px solid #2c5aa0;
            margin-bottom: 1rem;
        }
        
        .tab-buttons {
            display: flex;
            margin-bottom: 1rem;
            border-bottom: 1px solid #ddd;
            flex-wrap: wrap;
        }
        
        .tab-btn {
            padding: 1rem 2rem;
            background: none;
            border: none;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: all 0.3s;
        }
        
        .tab-btn.active {
            border-bottom-color: #2c5aa0;
            color: #2c5aa0;
            font-weight: bold;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .price-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
        }
        
        .price-item {
            background: #f8f9fa;
            padding: 1rem;
            border-radius: 8px;
            border: 1px solid #ddd;
        }
        
        .danger-zone {
            background: #fff5f5;
            border: 2px solid #dc3545;
            padding: 1.5rem;
            border-radius: 10px;
            margin-top: 2rem;
        }
        
        .danger-zone h3 {
            color: #dc3545;
            margin-bottom: 1rem;
        }
        
        .services-list {
            margin-top: 1rem;
        }
        
        .service-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem;
            border: 1px solid #ddd;
            border-radius: 8px;
            margin-bottom: 0.5rem;
            background: #f8f9fa;
        }
        
        .service-actions {
            display: flex;
            gap: 0.5rem;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }
        
        .stat-card {
            background: white;
            padding: 1.5rem;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
            border-top: 4px solid #2c5aa0;
        }
        
        .stat-number {
            font-size: 2rem;
            font-weight: bold;
            color: #2c5aa0;
            display: block;
        }
        
        .stat-label {
            color: #666;
            font-size: 0.9rem;
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }
        
        .modal-content {
            background: white;
            padding: 2rem;
            border-radius: 12px;
            width: 90%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid #f0f0f0;
        }
        
        .close-modal {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #666;
        }
        
        .category-badge {
            display: inline-block;
            padding: 0.3rem 0.6rem;
            background: #e9ecef;
            border-radius: 15px;
            font-size: 0.8rem;
            margin-left: 0.5rem;
        }

        @media (max-width: 768px) {
            .admin-nav {
                flex-direction: column;
                gap: 0.5rem;
            }
            
            .admin-header {
                padding: 1rem;
                flex-direction: column;
                gap: 1rem;
            }
            
            .content {
                padding: 1rem;
            }
            
            .settings-grid {
                grid-template-columns: 1fr;
            }
            
            .tab-buttons {
                flex-direction: column;
            }
            
            .tab-btn {
                padding: 0.8rem 1rem;
            }
            
            .service-item {
                flex-direction: column;
                gap: 1rem;
                align-items: flex-start;
            }
            
            .service-actions {
                width: 100%;
                justify-content: flex-end;
            }
        }
    </style>
</head>
<body>
    <header class="admin-header">
        <h1>ğŸš€ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª - Mauri Services</h1>
        <div>
            <span id="adminName">Ù…Ø±Ø­Ø¨Ø§Ù‹ØŒ Ø§Ù„Ù…Ø¯ÙŠØ±</span>
            <button class="logout-btn" onclick="logout()">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</button>
        </div>
    </header>
    
    <nav class="admin-nav">
        <a href="admin-dashboard.html">ğŸ“Š Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</a>
        <a href="admin-visitors.html">ğŸ‘¥ Ø§Ù„Ø²ÙˆØ§Ø±</a>
        <a href="admin-orders.html">ğŸ“¦ Ø§Ù„Ø·Ù„Ø¨Ø§Øª</a>
        <a href="admin-messages.html">ğŸ’¬ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„</a>
        <a href="admin-agents.html">ğŸ‘¥ Ø§Ù„ÙˆÙƒÙ„Ø§Ø¡</a>
        <a href="admin-users.html">ğŸ‘¤ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</a>
        <a href="admin-settings.html" class="active">âš™ï¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</a>
    </nav>
    
    <div class="content">
        <!-- Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø³Ø±ÙŠØ¹Ø© -->
        <div class="stats-grid">
            <div class="stat-card">
                <span class="stat-number" id="totalServicesCount">0</span>
                <span class="stat-label">Ø®Ø¯Ù…Ø© Ù†Ø´Ø·Ø©</span>
            </div>
            <div class="stat-card">
                <span class="stat-number" id="totalCategoriesCount">0</span>
                <span class="stat-label">ÙØ¦Ø© Ø®Ø¯Ù…Ø©</span>
            </div>
            <div class="stat-card">
                <span class="stat-number" id="totalOrdersCount">0</span>
                <span class="stat-label">Ø·Ù„Ø¨ Ù‡Ø°Ø§ Ø§Ù„Ø´Ù‡Ø±</span>
            </div>
            <div class="stat-card">
                <span class="stat-number" id="revenueCount">0 MRU</span>
                <span class="stat-label">Ø¥ÙŠØ±Ø§Ø¯Ø§Øª Ø§Ù„Ø´Ù‡Ø±</span>
            </div>
        </div>
        
        <div class="tab-buttons">
            <button class="tab-btn active" onclick="openTab('general')">Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø©</button>
            <button class="tab-btn" onclick="openTab('services')">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø®Ø¯Ù…Ø§Øª</button>
            <button class="tab-btn" onclick="openTab('pricing')">Ø§Ù„Ø£Ø³Ø¹Ø§Ø± ÙˆØ§Ù„Ø®Ø¯Ù…Ø§Øª</button>
            <button class="tab-btn" onclick="openTab('notifications')">Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª</button>
            <button class="tab-btn" onclick="openTab('backup')">Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ</button>
        </div>
        
        <!-- Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø© -->
        <div id="general" class="tab-content active">
            <div class="settings-grid">
                <div class="section">
                    <h2>ğŸŒ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…ÙˆÙ‚Ø¹</h2>
                    
                    <div class="form-group">
                        <label>Ø§Ø³Ù… Ø§Ù„Ù…ÙˆÙ‚Ø¹</label>
                        <input type="text" id="siteName" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…ÙˆÙ‚Ø¹">
                    </div>
                    
                    <div class="form-group">
                        <label>ÙˆØµÙ Ø§Ù„Ù…ÙˆÙ‚Ø¹</label>
                        <textarea id="siteDescription" rows="3" placeholder="ÙˆØµÙ Ø§Ù„Ù…ÙˆÙ‚Ø¹"></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label>Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</label>
                        <input type="email" id="siteEmail" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ">
                    </div>
                    
                    <div class="form-group">
                        <label>Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</label>
                        <input type="tel" id="phoneNumber" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ">
                    </div>
                    
                    <button class="btn btn-primary" onclick="saveGeneralSettings()">ğŸ’¾ Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</button>
                </div>
                
                <div class="section">
                    <h2>ğŸ“ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ØªÙˆØ§ØµÙ„</h2>
                    
                    <div class="form-group">
                        <label>Ø±Ù‚Ù… Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨</label>
                        <input type="tel" id="whatsappNumber" placeholder="Ø±Ù‚Ù… Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨">
                    </div>
                    
                    <div class="form-group">
                        <label>Ø±Ø§Ø¨Ø· Ø§Ù„ÙÙŠØ³Ø¨ÙˆÙƒ</label>
                        <input type="url" id="facebookUrl" placeholder="Ø±Ø§Ø¨Ø· Ø§Ù„ÙÙŠØ³Ø¨ÙˆÙƒ">
                    </div>
                    
                    <div class="form-group">
                        <label>Ø±Ø§Ø¨Ø· Ø§Ù„Ø¥Ù†Ø³ØªØ¬Ø±Ø§Ù…</label>
                        <input type="url" id="instagramUrl" placeholder="Ø±Ø§Ø¨Ø· Ø§Ù„Ø¥Ù†Ø³ØªØ¬Ø±Ø§Ù…">
                    </div>
                    
                    <div class="form-group">
                        <label>Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</label>
                        <textarea id="siteAddress" rows="2" placeholder="Ø§Ù„Ø¹Ù†ÙˆØ§Ù†"></textarea>
                    </div>
                    
                    <button class="btn btn-primary" onclick="saveContactSettings()">ğŸ’¾ Ø­ÙØ¸ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ØªÙˆØ§ØµÙ„</button>
                </div>
            </div>
        </div>
        
        <!-- Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø®Ø¯Ù…Ø§Øª -->
        <div id="services" class="tab-content">
            <div class="section">
                <div class="section-header">
                    <h2>ğŸ› ï¸ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø®Ø¯Ù…Ø§Øª</h2>
                    <button class="btn btn-success" onclick="openServiceModal()">â• Ø¥Ø¶Ø§ÙØ© Ø®Ø¯Ù…Ø© Ø¬Ø¯ÙŠØ¯Ø©</button>
                </div>
                
                <div class="form-group">
                    <label>Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ø®Ø¯Ù…Ø§Øª</label>
                    <input type="text" id="serviceSearch" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ø®Ø¯Ù…Ø©..." onkeyup="filterServices()">
                </div>
                
                <div id="servicesList" class="services-list">
                    <!-- Ø³ÙŠØªÙ… ØªØ¹Ø¨Ø¦Ø© Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ù‡Ù†Ø§ -->
                </div>
            </div>
        </div>
        
        <!-- Ø§Ù„Ø£Ø³Ø¹Ø§Ø± ÙˆØ§Ù„Ø®Ø¯Ù…Ø§Øª -->
        <div id="pricing" class="tab-content">
            <div class="section">
                <h2>ğŸ’° Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø£Ø³Ø¹Ø§Ø±</h2>
                
                <div class="price-grid">
                    <div class="price-item">
                        <div class="form-group">
                            <label>ØªÙˆØµÙŠÙ„ Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª (MRU)</label>
                            <input type="number" id="priceShopping" placeholder="Ø§Ù„Ø³Ø¹Ø±">
                        </div>
                    </div>
                    
                    <div class="price-item">
                        <div class="form-group">
                            <label>Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª (MRU)</label>
                            <input type="number" id="priceDocuments" placeholder="Ø§Ù„Ø³Ø¹Ø±">
                        </div>
                    </div>
                    
                    <div class="price-item">
                        <div class="form-group">
                            <label>Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª (MRU)</label>
                            <input type="number" id="priceResearch" placeholder="Ø§Ù„Ø³Ø¹Ø±">
                        </div>
                    </div>
                    
                    <div class="price-item">
                        <div class="form-group">
                            <label>Netflix & Ù…Ù†ØµØ§Øª Ø§Ù„Ø¨Ø« (MRU)</label>
                            <input type="number" id="priceNetflix" placeholder="Ø§Ù„Ø³Ø¹Ø±">
                        </div>
                    </div>
                    
                    <div class="price-item">
                        <div class="form-group">
                            <label>ChatGPT Plus (MRU)</label>
                            <input type="number" id="priceChatGPT" placeholder="Ø§Ù„Ø³Ø¹Ø±">
                        </div>
                    </div>
                    
                    <div class="price-item">
                        <div class="form-group">
                            <label>Ø¥Ù†Ø´Ø§Ø¡ Ù…ÙˆØ§Ù‚Ø¹ ÙˆÙŠØ¨ (MRU)</label>
                            <input type="number" id="priceWebsites" placeholder="Ø§Ù„Ø³Ø¹Ø±">
                        </div>
                    </div>
                </div>
                
                <button class="btn btn-success" onclick="savePricingSettings()">ğŸ’¾ Ø­ÙØ¸ Ø§Ù„Ø£Ø³Ø¹Ø§Ø±</button>
            </div>
        </div>
        
        <!-- Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª -->
        <div id="notifications" class="tab-content">
            <div class="section">
                <h2>ğŸ”” Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª</h2>
                
                <div class="setting-card">
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="notifyNewOrders"> 
                            Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
                        </label>
                    </div>
                    
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="notifyNewMessages"> 
                            Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
                        </label>
                    </div>
                    
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="notifyNewAgents"> 
                            Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø·Ù„Ø¨Ø§Øª Ø§Ù„ÙˆÙƒÙ„Ø§Ø¡
                        </label>
                    </div>
                    
                    <div class="form-group">
                        <label>Ø§Ù„Ø¨Ø±ÙŠØ¯ Ù„Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª</label>
                        <input type="email" id="notificationEmail" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ù„Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª">
                    </div>
                    
                    <button class="btn btn-primary" onclick="saveNotificationSettings()">ğŸ’¾ Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</button>
                </div>
            </div>
        </div>
        
        <!-- Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ -->
        <div id="backup" class="tab-content">
            <div class="section">
                <h2>ğŸ’¾ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</h2>
                
                <div class="setting-card">
                    <h3>ğŸ“¥ ØªØµØ¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</h3>
                    <p>Ø­ÙØ¸ Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© Ù…Ù† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</p>
                    <button class="btn btn-primary" onclick="exportAllData()">ğŸ“¥ ØªØµØ¯ÙŠØ± Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>
                    <button class="btn btn-warning" onclick="exportOrdersData()">ğŸ“¦ ØªØµØ¯ÙŠØ± Ø§Ù„Ø·Ù„Ø¨Ø§Øª ÙÙ‚Ø·</button>
                    <button class="btn btn-info" onclick="exportServicesData()">ğŸ› ï¸ ØªØµØ¯ÙŠØ± Ø§Ù„Ø®Ø¯Ù…Ø§Øª</button>
                </div>
                
                <div class="danger-zone">
                    <h3>âš ï¸ Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø®Ø·Ø±</h3>
                    <p>Ù‡Ø°Ù‡ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡Ø§</p>
                    
                    <div class="form-group">
                        <label>Ø§ÙƒØªØ¨ "DELETE" Ù„Ù„ØªØ£ÙƒÙŠØ¯</label>
                        <input type="text" id="deleteConfirm" placeholder="Ø§ÙƒØªØ¨ DELETE Ù‡Ù†Ø§">
                    </div>
                    
                    <button class="btn btn-danger" onclick="clearAllData()" id="deleteBtn" disabled>ğŸ—‘ï¸ Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>
                    <button class="btn btn-danger" onclick="resetSettings()" id="resetBtn" disabled>ğŸ”„ Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Ù„Ø¥Ø¶Ø§ÙØ©/ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø®Ø¯Ù…Ø§Øª -->
    <div id="serviceModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalServiceTitle">Ø¥Ø¶Ø§ÙØ© Ø®Ø¯Ù…Ø© Ø¬Ø¯ÙŠØ¯Ø©</h3>
                <button class="close-modal" onclick="closeServiceModal()">âœ•</button>
            </div>
            
            <div class="form-group">
                <label>Ø§Ø³Ù… Ø§Ù„Ø®Ø¯Ù…Ø©</label>
                <input type="text" id="serviceName" placeholder="Ø§Ø³Ù… Ø§Ù„Ø®Ø¯Ù…Ø©">
            </div>
            
            <div class="form-group">
                <label>ÙˆØµÙ Ø§Ù„Ø®Ø¯Ù…Ø©</label>
                <textarea id="serviceDescription" rows="3" placeholder="ÙˆØµÙ Ø§Ù„Ø®Ø¯Ù…Ø©"></textarea>
            </div>
            
            <div class="form-group">
                <label>Ø§Ù„ÙØ¦Ø©</label>
                <select id="serviceCategory">
                    <option value="delivery">Ø®Ø¯Ù…Ø§Øª Ø§Ù„ØªÙˆØµÙŠÙ„</option>
                    <option value="documents">Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª</option>
                    <option value="digital">Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø±Ù‚Ù…ÙŠØ©</option>
                    <option value="payment">Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¯ÙØ¹</option>
                    <option value="home">Ø®Ø¯Ù…Ø§Øª Ù…Ù†Ø²Ù„ÙŠØ©</option>
                    <option value="government">Ø®Ø¯Ù…Ø§Øª Ø­ÙƒÙˆÙ…ÙŠØ©</option>
                    <option value="information">Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¨Ø­Ø« ÙˆØ§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª</option>
                    <option value="additional">Ø®Ø¯Ù…Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©</option>
                </select>
            </div>
            
            <div class="form-group">
                <label>Ø§Ù„Ø³Ø¹Ø± (MRU)</label>
                <input type="number" id="servicePrice" placeholder="Ø§Ù„Ø³Ø¹Ø±">
            </div>
            
            <div class="form-group">
                <label>Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø©</label>
                <input type="text" id="serviceIcon" placeholder="ğŸš— Ø£Ùˆ ğŸ“„ Ø£Ùˆ ğŸ¤–">
            </div>
            
            <div class="form-group">
                <label>
                    <input type="checkbox" id="servicePopular"> 
                    Ø®Ø¯Ù…Ø© Ø´Ø¹Ø¨ÙŠØ© (Ø¥Ø¸Ù‡Ø§Ø± ÙƒØ§Ù„Ø£ÙƒØ«Ø± Ø·Ù„Ø¨Ø§Ù‹)
                </label>
            </div>
            
            <div class="form-group">
                <label>
                    <input type="checkbox" id="serviceActive"> 
                    Ø§Ù„Ø®Ø¯Ù…Ø© Ù†Ø´Ø·Ø©
                </label>
            </div>
            
            <div style="display: flex; gap: 1rem; margin-top: 1.5rem;">
                <button class="btn btn-success" onclick="saveService()" id="saveServiceBtn">ğŸ’¾ Ø­ÙØ¸ Ø§Ù„Ø®Ø¯Ù…Ø©</button>
                <button class="btn btn-danger" onclick="closeServiceModal()">Ø¥Ù„ØºØ§Ø¡</button>
            </div>
        </div>
    </div>

    <script>
        // ØªÙ‡ÙŠØ¦Ø© Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyC3qL5dzdOvIv7raaEd3xWOOraCiRks0h0",
            authDomain: "mauri-services.firebaseapp.com",
            projectId: "mauri-services",
            storageBucket: "mauri-services.firebasestorage.app",
            messagingSenderId: "324986363643",
            appId: "1:324986363643:web:803453b8ff2681b51d1a5e"
        };
        
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();

        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
        auth.onAuthStateChanged((user) => {
            if (!user) {
                window.location.href = 'admin-login.html';
            } else {
                // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø¯ÙˆØ± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
                db.collection('users').doc(user.uid).get().then((doc) => {
                    if (doc.exists && doc.data().role === 'admin') {
                        document.getElementById('adminName').textContent = `Ù…Ø±Ø­Ø¨Ø§Ù‹ØŒ ${doc.data().name}`;
                        initSettingsPage();
                    } else {
                        alert('âŒ Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ ØµÙ„Ø§Ø­ÙŠØ© Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù„Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…');
                        logout();
                    }
                });
            }
        });
        
        function logout() {
            auth.signOut().then(() => {
                window.location.href = 'admin-login.html';
            });
        }
        
        // Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…ØªÙ‚Ø¯Ù…
        class AdvancedSettingsManager {
            constructor() {
                this.settings = {};
                this.services = {};
                this.currentEditingService = null;
                this.init();
            }
            
            async init() {
                await this.loadSettings();
                await this.loadServices();
                await this.loadStats();
                this.setupEventListeners();
            }
            
            async loadSettings() {
                try {
                    const settingsDoc = await db.collection('settings').doc('general').get();
                    
                    if (settingsDoc.exists) {
                        this.settings = settingsDoc.data();
                        this.populateForm();
                    } else {
                        this.settings = this.getDefaultSettings();
                        await this.saveSettings();
                    }
                    
                } catch (error) {
                    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª:', error);
                }
            }
            
            async loadServices() {
                try {
                    const servicesSnapshot = await db.collection('services').get();
                    this.services = {};
                    
                    servicesSnapshot.forEach(doc => {
                        this.services[doc.id] = doc.data();
                    });
                    
                    this.renderServices();
                    
                } catch (error) {
                    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø®Ø¯Ù…Ø§Øª:', error);
                }
            }
            
            async loadStats() {
                try {
                    // Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø®Ø¯Ù…Ø§Øª
                    const servicesCount = Object.keys(this.services).length;
                    document.getElementById('totalServicesCount').textContent = servicesCount;
                    
                    // Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„ÙØ¦Ø§Øª
                    const categories = new Set(Object.values(this.services).map(s => s.category));
                    document.getElementById('totalCategoriesCount').textContent = categories.size;
                    
                    // Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø·Ù„Ø¨Ø§Øª
                    const now = new Date();
                    const startOfMonth = new Date(now.getFullYear(), now.getMonth(), 1);
                    const ordersSnapshot = await db.collection('orders')
                        .where('timestamp', '>=', startOfMonth)
                        .get();
                    
                    document.getElementById('totalOrdersCount').textContent = ordersSnapshot.size;
                    
                    // Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª
                    let revenue = 0;
                    ordersSnapshot.forEach(doc => {
                        const order = doc.data();
                        if (order.price && order.status === 'Ù…ÙƒØªÙ…Ù„') {
                            revenue += order.price;
                        }
                    });
                    
                    document.getElementById('revenueCount').textContent = revenue + ' MRU';
                    
                } catch (error) {
                    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª:', error);
                }
            }
            
            getDefaultSettings() {
                return {
                    siteName: 'Mauri Services',
                    siteDescription: 'Ù…Ù†ØµØ© Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ù…ØªÙƒØ§Ù…Ù„Ø© ÙÙŠ Ù…ÙˆØ±ÙŠØªØ§Ù†ÙŠØ§',
                    siteEmail: 'mauriservices33@gmail.com',
                    phoneNumber: '22244869780',
                    whatsappNumber: '22244869780',
                    facebookUrl: '',
                    instagramUrl: '',
                    siteAddress: 'Ù†ÙˆØ§ÙƒØ´ÙˆØ·ØŒ Ù…ÙˆØ±ÙŠØªØ§Ù†ÙŠØ§',
                    
                    pricing: {
                        shopping: 100,
                        documents: 200,
                        research: 200,
                        netflix: 200,
                        chatgpt: 300,
                        websites: 5000
                    },
                    
                    notifications: {
                        newOrders: true,
                        newMessages: true,
                        newAgents: true,
                        notificationEmail: 'mauriservices33@gmail.com'
                    },
                    
                    updatedAt: new Date()
                };
            }
            
            populateForm() {
                // Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø©
                document.getElementById('siteName').value = this.settings.siteName || '';
                document.getElementById('siteDescription').value = this.settings.siteDescription || '';
                document.getElementById('siteEmail').value = this.settings.siteEmail || '';
                document.getElementById('phoneNumber').value = this.settings.phoneNumber || '';
                
                // Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ØªÙˆØ§ØµÙ„
                document.getElementById('whatsappNumber').value = this.settings.whatsappNumber || '';
                document.getElementById('facebookUrl').value = this.settings.facebookUrl || '';
                document.getElementById('instagramUrl').value = this.settings.instagramUrl || '';
                document.getElementById('siteAddress').value = this.settings.siteAddress || '';
                
                // Ø§Ù„Ø£Ø³Ø¹Ø§Ø±
                document.getElementById('priceShopping').value = this.settings.pricing?.shopping || '';
                document.getElementById('priceDocuments').value = this.settings.pricing?.documents || '';
                document.getElementById('priceResearch').value = this.settings.pricing?.research || '';
                document.getElementById('priceNetflix').value = this.settings.pricing?.netflix || '';
                document.getElementById('priceChatGPT').value = this.settings.pricing?.chatgpt || '';
                document.getElementById('priceWebsites').value = this.settings.pricing?.websites || '';
                
                // Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
                document.getElementById('notifyNewOrders').checked = this.settings.notifications?.newOrders || false;
                document.getElementById('notifyNewMessages').checked = this.settings.notifications?.newMessages || false;
                document.getElementById('notifyNewAgents').checked = this.settings.notifications?.newAgents || false;
                document.getElementById('notificationEmail').value = this.settings.notifications?.notificationEmail || '';
            }
            
            renderServices() {
                const container = document.getElementById('servicesList');
                let html = '';
                
                Object.entries(this.services).forEach(([id, service]) => {
                    const categoryNames = {
                        'delivery': 'ØªÙˆØµÙŠÙ„',
                        'documents': 'Ù…Ø³ØªÙ†Ø¯Ø§Øª',
                        'digital': 'Ø±Ù‚Ù…ÙŠØ©',
                        'payment': 'Ø¯ÙØ¹',
                        'home': 'Ù…Ù†Ø²Ù„ÙŠØ©',
                        'government': 'Ø­ÙƒÙˆÙ…ÙŠØ©',
                        'information': 'Ù…Ø¹Ù„ÙˆÙ…Ø§Øª',
                        'additional': 'Ø¥Ø¶Ø§ÙÙŠØ©'
                    };
                    
                    html += `
                        <div class="service-item" data-service-id="${id}">
                            <div>
                                <strong>${service.name}</strong>
                                <span class="category-badge">${categoryNames[service.category] || service.category}</span>
                                <div style="color: #666; font-size: 0.9rem; margin-top: 0.3rem;">
                                    ${service.description}
                                </div>
                                <div style="color: #2c5aa0; font-weight: bold; margin-top: 0.3rem;">
                                    ${service.price} MRU
                                    ${service.popular ? ' | ğŸ”¥ Ø´Ø¹Ø¨ÙŠØ©' : ''}
                                    ${service.active === false ? ' | âŒ ØºÙŠØ± Ù†Ø´Ø·' : ''}
                                </div>
                            </div>
                            <div class="service-actions">
                                <button class="btn btn-primary btn-sm" onclick="editService('${id}')">âœï¸ ØªØ¹Ø¯ÙŠÙ„</button>
                                <button class="btn btn-danger btn-sm" onclick="deleteService('${id}')">ğŸ—‘ï¸ Ø­Ø°Ù</button>
                            </div>
                        </div>
                    `;
                });
                
                container.innerHTML = html || '<p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø®Ø¯Ù…Ø§Øª Ù…Ø¶Ø§ÙØ© Ø¨Ø¹Ø¯</p>';
            }
            
            async saveSettings() {
                try {
                    await db.collection('settings').doc('general').set({
                        ...this.settings,
                        updatedAt: new Date()
                    });
                    
                    return true;
                } catch (error) {
                    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª:', error);
                    return false;
                }
            }
            
            async saveService(serviceData, serviceId = null) {
                try {
                    if (serviceId) {
                        // ØªØ­Ø¯ÙŠØ« Ø®Ø¯Ù…Ø© Ù…ÙˆØ¬ÙˆØ¯Ø©
                        await db.collection('services').doc(serviceId).update(serviceData);
                    } else {
                        // Ø¥Ø¶Ø§ÙØ© Ø®Ø¯Ù…Ø© Ø¬Ø¯ÙŠØ¯Ø©
                        await db.collection('services').add({
                            ...serviceData,
                            createdAt: new Date(),
                            updatedAt: new Date()
                        });
                    }
                    
                    await this.loadServices();
                    await this.loadStats();
                    return true;
                    
                } catch (error) {
                    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ø®Ø¯Ù…Ø©:', error);
                    return false;
                }
            }
            
            async deleteService(serviceId) {
                try {
                    await db.collection('services').doc(serviceId).delete();
                    await this.loadServices();
                    await this.loadStats();
                    return true;
                } catch (error) {
                    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ø®Ø¯Ù…Ø©:', error);
                    return false;
                }
            }
            
            setupEventListeners() {
                // ØªÙØ¹ÙŠÙ„/ØªØ¹Ø·ÙŠÙ„ Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø­Ø°Ù
                document.getElementById('deleteConfirm').addEventListener('input', function() {
                    const deleteBtn = document.getElementById('deleteBtn');
                    const resetBtn = document.getElementById('resetBtn');
                    const isConfirmed = this.value === 'DELETE';
                    
                    deleteBtn.disabled = !isConfirmed;
                    resetBtn.disabled = !isConfirmed;
                });
            }
        }
        
        // ÙˆØ¸Ø§Ø¦Ù Ø¹Ø§Ù…Ø©
        function openTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            document.getElementById(tabName).classList.add('active');
            event.currentTarget.classList.add('active');
        }
        
        function filterServices() {
            const searchTerm = document.getElementById('serviceSearch').value.toLowerCase();
            const serviceItems = document.querySelectorAll('.service-item');
            
            serviceItems.forEach(item => {
                const serviceName = item.querySelector('strong').textContent.toLowerCase();
                if (serviceName.includes(searchTerm)) {
                    item.style.display = 'flex';
                } else {
                    item.style.display = 'none';
                }
            });
        }
        
        function openServiceModal(serviceId = null) {
            const modal = document.getElementById('serviceModal');
            const title = document.getElementById('modalServiceTitle');
            
            if (serviceId) {
                // ÙˆØ¶Ø¹ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„
                title.textContent = 'ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø®Ø¯Ù…Ø©';
                const service = settingsManager.services[serviceId];
                
                document.getElementById('serviceName').value = service.name;
                document.getElementById('serviceDescription').value = service.description;
                document.getElementById('serviceCategory').value = service.category;
                document.getElementById('servicePrice').value = service.price;
                document.getElementById('serviceIcon').value = service.icon || '';
                document.getElementById('servicePopular').checked = service.popular || false;
                document.getElementById('serviceActive').checked = service.active !== false;
                
                settingsManager.currentEditingService = serviceId;
            } else {
                // ÙˆØ¶Ø¹ Ø§Ù„Ø¥Ø¶Ø§ÙØ©
                title.textContent = 'Ø¥Ø¶Ø§ÙØ© Ø®Ø¯Ù…Ø© Ø¬Ø¯ÙŠØ¯Ø©';
                document.getElementById('serviceName').value = '';
                document.getElementById('serviceDescription').value = '';
                document.getElementById('serviceCategory').value = 'delivery';
                document.getElementById('servicePrice').value = '';
                document.getElementById('serviceIcon').value = '';
                document.getElementById('servicePopular').checked = false;
                document.getElementById('serviceActive').checked = true;
                
                settingsManager.currentEditingService = null;
            }
            
            modal.style.display = 'flex';
        }
        
        function closeServiceModal() {
            document.getElementById('serviceModal').style.display = 'none';
        }
        
        async function saveService() {
            const serviceData = {
                name: document.getElementById('serviceName').value,
                description: document.getElementById('serviceDescription').value,
                category: document.getElementById('serviceCategory').value,
                price: parseInt(document.getElementById('servicePrice').value) || 0,
                icon: document.getElementById('serviceIcon').value,
                popular: document.getElementById('servicePopular').checked,
                active: document.getElementById('serviceActive').checked,
                updatedAt: new Date()
            };
            
            if (!serviceData.name || !serviceData.description) {
                alert('âŒ ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©');
                return;
            }
            
            const success = await settingsManager.saveService(serviceData, settingsManager.currentEditingService);
            if (success) {
                alert('âœ… ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø®Ø¯Ù…Ø© Ø¨Ù†Ø¬Ø§Ø­');
                closeServiceModal();
            } else {
                alert('âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ø®Ø¯Ù…Ø©');
            }
        }
        
        function editService(serviceId) {
            openServiceModal(serviceId);
        }
        
        async function deleteService(serviceId) {
            const serviceName = settingsManager.services[serviceId].name;
            
            if (confirm(`âš ï¸ Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø§Ù„Ø®Ø¯Ù…Ø© "${serviceName}"ØŸ`)) {
                const success = await settingsManager.deleteService(serviceId);
                if (success) {
                    alert('âœ… ØªÙ… Ø­Ø°Ù Ø§Ù„Ø®Ø¯Ù…Ø© Ø¨Ù†Ø¬Ø§Ø­');
                } else {
                    alert('âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ø®Ø¯Ù…Ø©');
                }
            }
        }
        
        // ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ø­ÙØ¸
        async function saveGeneralSettings() {
            settingsManager.settings.siteName = document.getElementById('siteName').value;
            settingsManager.settings.siteDescription = document.getElementById('siteDescription').value;
            settingsManager.settings.siteEmail = document.getElementById('siteEmail').value;
            settingsManager.settings.phoneNumber = document.getElementById('phoneNumber').value;
            
            const success = await settingsManager.saveSettings();
            if (success) {
                alert('âœ… ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø© Ø¨Ù†Ø¬Ø§Ø­');
            } else {
                alert('âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª');
            }
        }
        
        async function saveContactSettings() {
            settingsManager.settings.whatsappNumber = document.getElementById('whatsappNumber').value;
            settingsManager.settings.facebookUrl = document.getElementById('facebookUrl').value;
            settingsManager.settings.instagramUrl = document.getElementById('instagramUrl').value;
            settingsManager.settings.siteAddress = document.getElementById('siteAddress').value;
            
            const success = await settingsManager.saveSettings();
            if (success) {
                alert('âœ… ØªÙ… Ø­ÙØ¸ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ØªÙˆØ§ØµÙ„ Ø¨Ù†Ø¬Ø§Ø­');
            } else {
                alert('âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª');
            }
        }
        
        async function savePricingSettings() {
            if (!settingsManager.settings.pricing) {
                settingsManager.settings.pricing = {};
            }
            
            settingsManager.settings.pricing.shopping = parseInt(document.getElementById('priceShopping').value) || 0;
            settingsManager.settings.pricing.documents = parseInt(document.getElementById('priceDocuments').value) || 0;
            settingsManager.settings.pricing.research = parseInt(document.getElementById('priceResearch').value) || 0;
            settingsManager.settings.pricing.netflix = parseInt(document.getElementById('priceNetflix').value) || 0;
            settingsManager.settings.pricing.chatgpt = parseInt(document.getElementById('priceChatGPT').value) || 0;
            settingsManager.settings.pricing.websites = parseInt(document.getElementById('priceWebsites').value) || 0;
            
            const success = await settingsManager.saveSettings();
            if (success) {
                alert('âœ… ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø£Ø³Ø¹Ø§Ø± Ø¨Ù†Ø¬Ø§Ø­');
            } else {
                alert('âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ø£Ø³Ø¹Ø§Ø±');
            }
        }
        
        async function saveNotificationSettings() {
            if (!settingsManager.settings.notifications) {
                settingsManager.settings.notifications = {};
            }
            
            settingsManager.settings.notifications.newOrders = document.getElementById('notifyNewOrders').checked;
            settingsManager.settings.notifications.newMessages = document.getElementById('notifyNewMessages').checked;
            settingsManager.settings.notifications.newAgents = document.getElementById('notifyNewAgents').checked;
            settingsManager.settings.notifications.notificationEmail = document.getElementById('notificationEmail').value;
            
            const success = await settingsManager.saveSettings();
            if (success) {
                alert('âœ… ØªÙ… Ø­ÙØ¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø¨Ù†Ø¬Ø§Ø­');
            } else {
                alert('âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª');
            }
        }
        
        // ÙˆØ¸Ø§Ø¦Ù Ø§Ù„ØªØµØ¯ÙŠØ±
        async function exportAllData() {
            try {
                const [ordersSnapshot, messagesSnapshot, agentsSnapshot, visitorsSnapshot, servicesSnapshot] = await Promise.all([
                    db.collection('orders').get(),
                    db.collection('messages').get(),
                    db.collection('agent_applications').get(),
                    db.collection('visitors').get(),
                    db.collection('services').get()
                ]);
                
                const data = {
                    orders: ordersSnapshot.docs.map(doc => ({ id: doc.id, ...doc.data() })),
                    messages: messagesSnapshot.docs.map(doc => ({ id: doc.id, ...doc.data() })),
                    agents: agentsSnapshot.docs.map(doc => ({ id: doc.id, ...doc.data() })),
                    visitors: visitorsSnapshot.docs.map(doc => ({ id: doc.id, ...doc.data() })),
                    services: servicesSnapshot.docs.map(doc => ({ id: doc.id, ...doc.data() })),
                    settings: settingsManager.settings,
                    exportDate: new Date().toLocaleString('ar-SA'),
                    totalRecords: ordersSnapshot.size + messagesSnapshot.size + agentsSnapshot.size + visitorsSnapshot.size + servicesSnapshot.size
                };
                
                downloadJSON(data, `backup_mauri-services_${new Date().toISOString().split('T')[0]}.json`);
                
            } catch (error) {
                console.error('âŒ Ø®Ø·Ø£ ÙÙŠ ØªØµØ¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:', error);
                alert('âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØµØ¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');
            }
        }
        
        async function exportOrdersData() {
            try {
                const ordersSnapshot = await db.collection('orders').get();
                const data = {
                    orders: ordersSnapshot.docs.map(doc => ({ id: doc.id, ...doc.data() })),
                    exportDate: new Date().toLocaleString('ar-SA'),
                    totalOrders: ordersSnapshot.size
                };
                
                downloadJSON(data, `orders_mauri-services_${new Date().toISOString().split('T')[0]}.json`);
                
            } catch (error) {
                console.error('âŒ Ø®Ø·Ø£ ÙÙŠ ØªØµØ¯ÙŠØ± Ø§Ù„Ø·Ù„Ø¨Ø§Øª:', error);
                alert('âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØµØ¯ÙŠØ± Ø§Ù„Ø·Ù„Ø¨Ø§Øª');
            }
        }
        
        async function exportServicesData() {
            try {
                const servicesSnapshot = await db.collection('services').get();
                const data = {
                    services: servicesSnapshot.docs.map(doc => ({ id: doc.id, ...doc.data() })),
                    exportDate: new Date().toLocaleString('ar-SA'),
                    totalServices: servicesSnapshot.size
                };
                
                downloadJSON(data, `services_mauri-services_${new Date().toISOString().split('T')[0]}.json`);
                
            } catch (error) {
                console.error('âŒ Ø®Ø·Ø£ ÙÙŠ ØªØµØ¯ÙŠØ± Ø§Ù„Ø®Ø¯Ù…Ø§Øª:', error);
                alert('âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØµØ¯ÙŠØ± Ø§Ù„Ø®Ø¯Ù…Ø§Øª');
            }
        }
        
        function downloadJSON(data, filename) {
            const dataStr = JSON.stringify(data, null, 2);
            const dataBlob = new Blob([dataStr], { type: 'application/json' });
            
            const link = document.createElement('a');
            link.href = URL.createObjectURL(dataBlob);
            link.download = filename;
            link.style.visibility = 'hidden';
            
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            alert(`âœ… ØªÙ… ØªØµØ¯ÙŠØ± ${filename} Ø¨Ù†Ø¬Ø§Ø­`);
        }
        
        async function clearAllData() {
            if (confirm('âš ï¸ Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§ØªØŸ Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡!')) {
                try {
                    // ÙŠÙ…ÙƒÙ† Ø¥Ø¶Ø§ÙØ© Ù…Ù†Ø·Ù‚ Ù…Ø³Ø­ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù‡Ù†Ø§
                    alert('ğŸš§ Ù‡Ø°Ù‡ Ø§Ù„Ø®Ø§ØµÙŠØ© Ù‚ÙŠØ¯ Ø§Ù„ØªØ·ÙˆÙŠØ±');
                    
                } catch (error) {
                    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ù…Ø³Ø­ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:', error);
                    alert('âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ù…Ø³Ø­ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');
                }
            }
        }
        
        async function resetSettings() {
            if (confirm('âš ï¸ Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§ØªØŸ Ø³ÙŠØªÙ… ÙÙ‚Ø¯Ø§Ù† Ø¬Ù…ÙŠØ¹ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª!')) {
                try {
                    settingsManager.settings = settingsManager.getDefaultSettings();
                    await settingsManager.saveSettings();
                    settingsManager.populateForm();
                    
                    alert('âœ… ØªÙ… Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¨Ù†Ø¬Ø§Ø­');
                    
                } catch (error) {
                    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ¹ÙŠÙŠÙ†:', error);
                    alert('âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ¹ÙŠÙŠÙ†');
                }
            }
        }
        
        // Ø¨Ø¯Ø¡ Ø§Ù„Ù†Ø¸Ø§Ù…
        let settingsManager;
        function initSettingsPage() {
            settingsManager = new AdvancedSettingsManager();
        }
    </script>
</body>
</html>